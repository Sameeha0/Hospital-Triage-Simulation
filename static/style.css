:root{
  --bg:#0d1419;
  --card:#1a2332;
  --accent:#00bcd4;
  --danger:#e53935;
  --ok:#4CAF50;
  --text:#e0e0e0;
  --text-dark:#121212;
}

@keyframes float{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-20px);}
}

@keyframes shimmer{
  0%{background-position:200% 0;}
  100%{background-position:-200% 0;}
}

@keyframes gradient-shift{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

@keyframes glow-pulse{
  0%{opacity:0.4;transform:scale(1);}
  50%{opacity:0.7;transform:scale(1.1);}
  100%{opacity:0.4;transform:scale(1);}
}

@keyframes float-avatar{
  0%,100%{transform:translateY(0) scale(1);}
  50%{transform:translateY(-8px) scale(1.02);}
}

*{box-sizing:border-box;font-family:'Segoe UI', Roboto, Arial, sans-serif}
body{
  background:linear-gradient(-45deg,#0a0e27,#1a2f5a,#0d1419,#1a1f3a);
  background-size:400% 400%;
  background-attachment:fixed;
  color:var(--text);
  margin:0;
  padding:20px;
  position:relative;
  overflow-x:hidden;
  animation:gradient-shift 15s ease infinite;
}

body.game-bg{
  background:
    linear-gradient(180deg, rgba(10,14,39,0.75), rgba(10,14,39,0.9)),
    url('/static/images/game-bg.jpg') center/cover no-repeat fixed;
}

body::before{
  content:'';
  position:fixed;
  top:-50%;
  left:-50%;
  right:-50%;
  bottom:-50%;
  background:
    radial-gradient(circle at 20% 50%, rgba(0,188,212,0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(0,100,180,0.12) 0%, transparent 50%),
    radial-gradient(circle at 40% 20%, rgba(100,200,255,0.08) 0%, transparent 60%);
  pointer-events:none;
  z-index:-1;
  animation:glow-pulse 8s ease-in-out infinite;
}
.container{max-width:980px;margin:0 auto;position:relative;z-index:1}
  header{display:flex;flex-direction:column;gap:8px;margin-bottom:10px}
  .top-row{display:flex;justify-content:space-between;align-items:center}
.nav{display:flex;gap:14px;align-items:center}
.nav a{margin-left:0;color:#cde7eb;text-decoration:none;font-weight:700;letter-spacing:0.2px;padding:4px 0;transition:color 0.2s ease}
.nav a:hover{color:#80deea}
.nav a:focus-visible{outline:2px solid #80deea;outline-offset:2px}

h1{color:var(--accent)}

.subtitle{color:#9e9e9e;margin:0}
  .dashboard{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:16px 0}
.stat{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 6px 20px rgba(0,188,212,0.15);border:1px solid rgba(0,188,212,0.2);transition:transform .2s,box-shadow .2s}
  .stat:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,188,212,0.25)}
  .stat.small{display:flex;flex-direction:column;gap:6px}
  .bar{background:rgba(0,188,212,0.1);height:12px;border-radius:6px;margin-top:8px;overflow:hidden}
  .progress{height:100%;width:0;background:var(--accent);transition:width .4s}
  .progress.trust{background:linear-gradient(90deg,#4caf50,#ffb74d)}
  main{display:flex;justify-content:center;margin:20px 0}
.patient-card{
  background:var(--card);
  padding:18px;
  border-radius:14px;
  box-shadow:0 8px 30px rgba(0,188,212,0.2);
  border:1px solid rgba(0,188,212,0.3);
  width:680px;
  max-width:100%;
  animation:float 3s ease-in-out infinite;
}
.patient-card h2{margin-top:0;color:var(--accent)}
  .patient-top{display:flex;align-items:center;gap:12px}
  .avatar{width:76px;height:76px;border-radius:14px;background:linear-gradient(135deg,#00bcd4,#0097a7);display:flex;align-items:center;justify-content:center;font-size:34px;box-shadow:0 10px 24px rgba(0,188,212,0.35), inset 0 2px 6px rgba(255,255,255,0.15);border:2px solid rgba(0,188,212,0.5);flex-shrink:0;position:relative;overflow:hidden;transform:perspective(600px) rotateX(6deg)}
  .avatar::after{content:'';position:absolute;inset:6px;border-radius:12px;box-shadow:inset 0 0 12px rgba(255,255,255,0.2);pointer-events:none}
  .avatar-img{width:100%;height:100%;border-radius:12px;object-fit:cover;transform:translateZ(6px);box-shadow:0 6px 16px rgba(0,0,0,0.25);animation:float-avatar 3s ease-in-out infinite}
  .avatar-fallback{width:100%;height:100%;border-radius:12px;position:relative;overflow:hidden;background:linear-gradient(140deg,#0bb3c7,#004a58)}
  .avatar-fallback::before{content:'';position:absolute;inset:10px;border-radius:10px;background:linear-gradient(120deg,rgba(255,255,255,0.15),rgba(255,255,255,0.05));box-shadow:inset 0 0 14px rgba(255,255,255,0.18)}
  .avatar-fallback::after{content:'';position:absolute;inset:-60% -40%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.22),transparent);animation:shimmer 1.6s ease-in-out infinite}
  .patient-details{flex:1}
  .detail{margin-bottom:6px;color:var(--text)}
  .badge-wrap{width:92px;display:flex;justify-content:flex-end}
  .badge{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:700;color:white}
  .badge.low{background:#4caf50}
  .badge.medium{background:#ffb74d;color:var(--text-dark)}
  .badge.high{background:#e53935}
  .actions{display:flex;gap:10px;margin-top:14px}
.actions button{
  flex:1;
  padding:12px;
  border-radius:10px;
  border:2px solid var(--accent);
  background:transparent;
  color:var(--accent);
  font-weight:700;
  cursor:pointer;
  transition:all .2s ease;
}

.actions button:hover{
  background:var(--accent);
  color:var(--text-dark);
  transform:translateY(-2px);
  box-shadow:0 8px 22px rgba(0,188,212,0.3);
}

.actions button#discharge{border-color:#9e9e9e;color:#9e9e9e}

.actions button#discharge:hover{background:#9e9e9e}

.actions button#isolate{border-color:#26c6da;color:#26c6da}

.actions button#isolate:hover{background:#26c6da;color:var(--text-dark)}
  .muted{background:transparent;border:1px dashed #4a5f66;color:#9e9e9e;padding:8px 12px;border-radius:8px;transition:all 0.2s}

  .muted:hover{border-color:var(--accent);color:var(--accent)}
  .message{margin-top:12px;padding:10px;border-radius:8px;background:rgba(0,188,212,0.15);color:#80deea;border-left:4px solid var(--accent)}
  .analytics{margin:20px 0;background:rgba(8,16,26,0.65);border:1px solid rgba(0,188,212,0.25);border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,0.25)}
  .analytics-head{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
  .analytics-head h2{margin:0;color:var(--accent);font-size:20px}
  .muted-text{color:#9aa7b2;margin:0}
  .analytics-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
  .metric{background:linear-gradient(160deg,rgba(0,188,212,0.15),rgba(0,0,0,0.2));border-radius:14px;padding:12px;border:1px solid rgba(0,188,212,0.2);min-height:92px;display:flex;flex-direction:column;gap:6px}
  .metric.wide{grid-column:span 2}
  .metric-label{font-size:12px;text-transform:uppercase;letter-spacing:1px;color:#9fb7c0}
  .metric-value{font-size:22px;font-weight:800;color:#e0f7fa}
  .metric-sub{font-size:12px;color:#9aa7b2}
  .export-group{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin-top:8px}
  .export-label{color:#9aa7b2;font-size:12px;text-transform:uppercase;letter-spacing:1px}
  .muted.danger{border-color:#ff8a80;color:#ff8a80}
  .muted.danger:hover{border-color:#ef5350;color:#ef5350}
  .chart-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:22px;margin:22px 0}
  .chart-card{background:rgba(12,22,34,0.7);border:1px solid rgba(0,188,212,0.2);border-radius:16px;padding:14px;box-shadow:0 10px 24px rgba(0,0,0,0.25)}
  .chart-card h3{margin:0 0 10px 0;color:var(--accent);font-size:16px}
  .chart-card canvas{width:100%;height:280px;background:rgba(4,12,18,0.4);border-radius:12px}
  .export-zone{margin-top:24px}
  .overlay{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.7);z-index:9999;pointer-events:auto}
  .hidden{display:none !important}
  .final-box{background:var(--card);padding:30px;border-radius:14px;min-width:380px;text-align:center;border:2px solid rgba(0,188,212,0.5);box-shadow:0 0 40px rgba(0,188,212,0.4),inset 0 0 20px rgba(0,188,212,0.1);animation:none;max-width:90vw;pointer-events:auto}
  #restart{background:linear-gradient(135deg,var(--accent),#26c6da);border:none;color:var(--text-dark);padding:14px 32px;font-size:16px;font-weight:700;border-radius:8px;cursor:pointer;transition:all 0.3s ease;margin-top:20px;text-transform:uppercase;letter-spacing:1px;box-shadow:0 6px 20px rgba(0,188,212,0.4);pointer-events:auto;z-index:10001;position:relative;display:inline-block}
  #restart:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 10px 30px rgba(0,188,212,0.6);background:linear-gradient(135deg,#26c6da,#4dd0e1)}
  #restart:active{transform:translateY(-1px) scale(1)}
  footer{margin-top:18px;color:#616161}

  @media (max-width:900px){
    .dashboard{grid-template-columns:repeat(2,1fr)}
    .analytics-grid{grid-template-columns:repeat(2,1fr)}
    .chart-grid{grid-template-columns:1fr}
    .patient-card{width:92%;max-width:650px;padding:14px}
    .avatar{width:64px;height:64px;font-size:28px}
    h1{font-size:28px}
    .detail{font-size:14px}
  }

  @media (max-width:600px){
    body{padding:12px}
    .dashboard{grid-template-columns:1fr;gap:10px}
    .analytics-grid{grid-template-columns:1fr}
    .patient-card{width:100%;padding:12px}
    .patient-top{flex-direction:column;text-align:center}
    .avatar{width:60px;height:60px;font-size:26px;margin:0 auto}
    .badge-wrap{width:100%;justify-content:center;margin-top:8px}
    h1{font-size:24px;margin:10px 0}
    .subtitle{font-size:13px}
    .detail{font-size:13px;margin-bottom:4px}
    .stat{padding:10px}
    .actions button{padding:10px;font-size:13px}
    .message{font-size:13px}
    .final-box{min-width:90vw}
  }

  @media (max-width:400px){
    body{padding:8px}
    h1{font-size:20px;margin:8px 0}
    .patient-card{padding:10px;border-radius:10px}
    .avatar{width:48px;height:48px;font-size:20px}
    .pat-info{display:flex;flex-direction:column;gap:4px}
    .detail{font-size:12px}
    .actions button{padding:8px;font-size:12px}
    .stat{padding:8px;font-size:12px}
    .badge{padding:4px 8px;font-size:11px}
  }
    .nav{gap:10px;flex-wrap:wrap;justify-content:center}
    .nav a{font-size:13px}
    .dashboard{flex-direction:column}
  }
